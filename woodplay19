<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© ØªØ­Ø·ÙŠÙ… Ø§Ù„Ø£Ø´Ø¬Ø§Ø±</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const TreeChopGame = () => {
          const [trees, setTrees] = useState([]);
          const [wood, setWood] = useState(0);
          const [money, setMoney] = useState(0);
          const [bagCapacity, setBagCapacity] = useState(5);
          const [axePower, setAxePower] = useState(1);
          const [currentScreen, setCurrentScreen] = useState('forest');
          const [currentIsland, setCurrentIsland] = useState('normal');
          const [unlockedIslands, setUnlockedIslands] = useState(['normal']);
          const [completedQuests, setCompletedQuests] = useState([]);

          const islands = {
            normal: {
              name: 'Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©',
              icon: 'ğŸŒ²',
              cost: 0,
              woodValue: 10,
              bgColor: 'from-green-400 to-green-600',
              treeTypes: ['ğŸŒ²', 'ğŸŒ³']
            },
            snow: {
              name: 'ØºØ§Ø¨Ø© Ø§Ù„Ø«Ù„Ø¬',
              icon: 'ğŸ„',
              cost: 1000,
              woodValue: 25,
              bgColor: 'from-blue-300 to-blue-500',
              treeTypes: ['ğŸ„', 'ğŸŒ²']
            },
            desert: {
              name: 'Ø§Ù„ØµØ­Ø±Ø§Ø¡',
              icon: 'ğŸŒµ',
              cost: 3000,
              woodValue: 50,
              bgColor: 'from-yellow-400 to-orange-500',
              treeTypes: ['ğŸŒµ', 'ğŸŒ´']
            },
            jungle: {
              name: 'Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ù…Ø·ÙŠØ±Ø©',
              icon: 'ğŸŒ´',
              cost: 7000,
              woodValue: 100,
              bgColor: 'from-green-600 to-green-800',
              treeTypes: ['ğŸŒ´', 'ğŸŒ³', 'ğŸŒ²']
            }
          };

          const quests = [
            { id: 1, title: 'Ù…Ø¨ØªØ¯Ø¦ Ø§Ù„Ø£Ø®Ø´Ø§Ø¨', desc: 'Ø§Ø¬Ù…Ø¹ 50 Ø®Ø´Ø¨Ø©', target: 50, type: 'wood', reward: 200, check: () => wood >= 50 },
            { id: 2, title: 'Ø§Ù„ÙØ£Ø³ Ø§Ù„Ù‚ÙˆÙŠ', desc: 'Ø·ÙˆØ± Ø§Ù„ÙØ£Ø³ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ 3', target: 3, type: 'axe', reward: 500, check: () => axePower >= 3 },
            { id: 3, title: 'ØªØ§Ø¬Ø± Ù…Ø­ØªØ±Ù', desc: 'Ø§Ø¬Ù…Ø¹ 1000 Ø¹Ù…Ù„Ø©', target: 1000, type: 'money', reward: 500, check: () => money >= 1000 },
            { id: 4, title: 'Ø§Ù„Ø´Ù†Ø·Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø©', desc: 'Ø·ÙˆØ± Ø§Ù„Ø´Ù†Ø·Ø© Ù„Ù„Ø³Ø¹Ø© 20', target: 20, type: 'bag', reward: 800, check: () => bagCapacity >= 20 },
            { id: 5, title: 'Ù…Ø³ØªÙƒØ´Ù Ø§Ù„Ø¬Ø²Ø±', desc: 'Ø§ÙØªØ­ 3 Ø¬Ø²Ø±', target: 3, type: 'islands', reward: 1500, check: () => unlockedIslands.length >= 3 },
            { id: 6, title: 'Ø§Ù„ÙØ£Ø³ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ', desc: 'Ø·ÙˆØ± Ø§Ù„ÙØ£Ø³ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ 10', target: 10, type: 'axe', reward: 3000, check: () => axePower >= 10 }
          ];

          useEffect(() => {
            const savedGame = localStorage.getItem('treeGameSave');
            if (savedGame) {
              try {
                const data = JSON.parse(savedGame);
                setWood(data.wood || 0);
                setMoney(data.money || 0);
                setBagCapacity(data.bagCapacity || 5);
                setAxePower(data.axePower || 1);
                setUnlockedIslands(data.unlockedIslands || ['normal']);
                setCompletedQuests(data.completedQuests || []);
                setCurrentIsland(data.currentIsland || 'normal');
              } catch (e) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©');
              }
            }
          }, []);

          useEffect(() => {
            const gameData = {
              wood,
              money,
              bagCapacity,
              axePower,
              unlockedIslands,
              completedQuests,
              currentIsland
            };
            localStorage.setItem('treeGameSave', JSON.stringify(gameData));
          }, [wood, money, bagCapacity, axePower, unlockedIslands, completedQuests, currentIsland]);

          useEffect(() => {
            generateTrees();
          }, [currentIsland]);

          const generateTrees = () => {
            const newTrees = [];
            for (let i = 0; i < 15; i++) {
              newTrees.push({
                id: Date.now() + i,
                health: 100,
                x: (i % 5) * 18 + 5,
                y: Math.floor(i / 5) * 30 + 10,
                type: islands[currentIsland].treeTypes[Math.floor(Math.random() * islands[currentIsland].treeTypes.length)]
              });
            }
            setTrees(newTrees);
          };

          const chopTree = (treeId) => {
            if (wood >= bagCapacity) {
              alert('Ø§Ù„Ø´Ù†Ø·Ø© Ù…Ù…ØªÙ„Ø¦Ø©! Ø±ÙˆØ­ Ø¨ÙŠØ¹ Ø§Ù„Ø®Ø´Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø§Ø¦Ø¹');
              return;
            }

            setTrees(prevTrees => {
              return prevTrees.map(tree => {
                if (tree.id === treeId) {
                  const newHealth = tree.health - (10 * axePower);
                  if (newHealth <= 0) {
                    const woodAmount = Math.min(bagCapacity - wood, 3);
                    setWood(w => Math.min(w + woodAmount, bagCapacity));
                    
                    setTimeout(() => {
                      setTrees(prev => {
                        const filtered = prev.filter(t => t.id !== treeId);
                        return [...filtered, {
                          id: Date.now(),
                          health: 100,
                          x: tree.x,
                          y: tree.y,
                          type: islands[currentIsland].treeTypes[Math.floor(Math.random() * islands[currentIsland].treeTypes.length)]
                        }];
                      });
                    }, 2000);
                    
                    return null;
                  }
                  return { ...tree, health: newHealth };
                }
                return tree;
              }).filter(Boolean);
            });
          };

          const sellWood = () => {
            const earnings = wood * islands[currentIsland].woodValue;
            setMoney(m => m + earnings);
            setWood(0);
          };

          const upgradeBag = () => {
            const cost = (bagCapacity - 5 + 1) * 50;
            if (money >= cost) {
              setMoney(m => m - cost);
              setBagCapacity(c => c + 5);
            }
          };

          const upgradeAxe = () => {
            const cost = axePower * 100;
            if (money >= cost) {
              setMoney(m => m - cost);
              setAxePower(p => p + 1);
            }
          };

          const unlockIsland = (islandKey) => {
            const island = islands[islandKey];
            if (money >= island.cost && !unlockedIslands.includes(islandKey)) {
              setMoney(m => m - island.cost);
              setUnlockedIslands([...unlockedIslands, islandKey]);
              setCurrentIsland(islandKey);
            }
          };

          const claimQuest = (quest) => {
            if (quest.check() && !completedQuests.includes(quest.id)) {
              setMoney(m => m + quest.reward);
              setCompletedQuests([...completedQuests, quest.id]);
            }
          };

          const resetGame = () => {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ÙƒÙ„ Ø§Ù„ØªÙ‚Ø¯Ù…ØŸ')) {
              localStorage.removeItem('treeGameSave');
              window.location.reload();
            }
          };

          return (
            <div className="min-h-screen bg-gradient-to-b from-sky-400 to-green-300 p-4" dir="rtl">
              <div className="max-w-6xl mx-auto">
                <div className="bg-amber-900 rounded-lg shadow-xl p-4 mb-4">
                  <div className="grid grid-cols-3 gap-4 text-white text-center">
                    <div className="bg-amber-800 rounded p-3">
                      <div className="text-3xl mb-1">ğŸªµ</div>
                      <div className="font-bold text-xl">{wood}/{bagCapacity}</div>
                      <div className="text-sm">Ø§Ù„Ø£Ø®Ø´Ø§Ø¨</div>
                    </div>
                    <div className="bg-amber-800 rounded p-3">
                      <div className="text-3xl mb-1">ğŸ’°</div>
                      <div className="font-bold text-xl">{money}</div>
                      <div className="text-sm">Ø§Ù„ÙÙ„ÙˆØ³</div>
                    </div>
                    <div className="bg-amber-800 rounded p-3">
                      <div className="text-3xl mb-1">ğŸª“</div>
                      <div className="font-bold text-xl">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {axePower}</div>
                      <div className="text-sm">Ù‚ÙˆØ© Ø§Ù„ÙØ£Ø³</div>
                    </div>
                  </div>
                  <div className="text-center mt-2 text-yellow-300 text-sm">
                    Ø§Ù„Ø¬Ø²ÙŠØ±Ø©: {islands[currentIsland].name} | Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®Ø´Ø¨: {islands[currentIsland].woodValue} ğŸ’°
                  </div>
                </div>

                <div className="grid grid-cols-4 gap-2 mb-4">
                  <button
                    onClick={() => setCurrentScreen('forest')}
                    className={`py-3 rounded-lg font-bold transition ${
                      currentScreen === 'forest' ? 'bg-green-600 text-white' : 'bg-white text-green-600'
                    }`}
                  >
                    ğŸŒ² Ø§Ù„ØºØ§Ø¨Ø©
                  </button>
                  <button
                    onClick={() => setCurrentScreen('seller')}
                    className={`py-3 rounded-lg font-bold transition ${
                      currentScreen === 'seller' ? 'bg-blue-600 text-white' : 'bg-white text-blue-600'
                    }`}
                  >
                    ğŸª Ø§Ù„Ø¨Ø§Ø¦Ø¹
                  </button>
                  <button
                    onClick={() => setCurrentScreen('shop')}
                    className={`py-3 rounded-lg font-bold transition ${
                      currentScreen === 'shop' ? 'bg-purple-600 text-white' : 'bg-white text-purple-600'
                    }`}
                  >
                    ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±
                  </button>
                  <button
                    onClick={() => setCurrentScreen('quests')}
                    className={`py-3 rounded-lg font-bold transition relative ${
                      currentScreen === 'quests' ? 'bg-yellow-600 text-white' : 'bg-white text-yellow-600'
                    }`}
                  >
                    ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø§Øª
                    {quests.filter(q => q.check() && !completedQuests.includes(q.id)).length > 0 && (
                      <span className="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center">
                        {quests.filter(q => q.check() && !completedQuests.includes(q.id)).length}
                      </span>
                    )}
                  </button>
                </div>

                {currentScreen === 'forest' && (
                  <div className={`bg-gradient-to-b ${islands[currentIsland].bgColor} rounded-lg shadow-xl p-6`}>
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-3xl font-bold text-white">{islands[currentIsland].icon} {islands[currentIsland].name}</h2>
                      <button
                        onClick={() => setCurrentScreen('islands')}
                        className="bg-white text-blue-600 px-4 py-2 rounded-lg font-bold hover:bg-blue-50"
                      >
                        ğŸ—ºï¸ ØªØºÙŠÙŠØ± Ø§Ù„Ø¬Ø²ÙŠØ±Ø©
                      </button>
                    </div>
                    <div className="relative h-96 bg-black bg-opacity-20 rounded-lg">
                      {trees.map(tree => (
                        <button
                          key={tree.id}
                          onClick={() => chopTree(tree.id)}
                          className="absolute transform hover:scale-110 transition"
                          style={{ left: `${tree.x}%`, top: `${tree.y}%` }}
                        >
                          <div className="text-5xl">{tree.type}</div>
                          <div className="bg-red-500 h-2 rounded-full mt-1 overflow-hidden w-12">
                            <div 
                              className="bg-green-400 h-full transition-all"
                              style={{ width: `${tree.health}%` }}
                            ></div>
                          </div>
                        </button>
                      ))}
                    </div>
                  </div>
                )}

                {currentScreen === 'islands' && (
                  <div className="bg-white rounded-lg shadow-xl p-6">
                    <h2 className="text-3xl font-bold text-center mb-6">ğŸ—ºï¸ Ø§Ù„Ø¬Ø²Ø± Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
                    <div className="grid md:grid-cols-2 gap-4">
                      {Object.entries(islands).map(([key, island]) => (
                        <div 
                          key={key}
                          className={`border-4 rounded-lg p-6 ${
                            unlockedIslands.includes(key) ? 'border-green-500' : 'border-gray-300'
                          }`}
                        >
                          <div className="text-6xl text-center mb-3">{island.icon}</div>
                          <h3 className="text-2xl font-bold text-center mb-2">{island.name}</h3>
                          <div className="text-center mb-4">
                            <div className="text-lg">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®Ø´Ø¨: <span className="font-bold text-green-600">{island.woodValue} ğŸ’°</span></div>
                          </div>
                          {unlockedIslands.includes(key) ? (
                            <button
                              onClick={() => {
                                setCurrentIsland(key);
                                setCurrentScreen('forest');
                              }}
                              className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg"
                            >
                              {currentIsland === key ? 'âœ… Ø§Ù„Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©' : 'Ø§Ù†ØªÙ‚Ù„ Ù„Ù„Ø¬Ø²ÙŠØ±Ø©'}
                            </button>
                          ) : (
                            <button
                              onClick={() => unlockIsland(key)}
                              disabled={money < island.cost}
                              className="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg"
                            >
                              {money >= island.cost ? `Ø§ÙØªØ­ (${island.cost} ğŸ’°)` : `ØªØ­ØªØ§Ø¬ ${island.cost} ğŸ’°`}
                            </button>
                          )}
                        </div>
                      ))}
                    </div>
                    <button
                      onClick={() => setCurrentScreen('forest')}
                      className="w-full mt-4 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 rounded-lg"
                    >
                      Ø¹ÙˆØ¯Ø© Ù„Ù„ØºØ§Ø¨Ø©
                    </button>
                  </div>
                )}

                {currentScreen === 'quests' && (
                  <div className="bg-gradient-to-b from-yellow-400 to-orange-500 rounded-lg shadow-xl p-6">
                    <h2 className="text-3xl font-bold text-white text-center mb-6">ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø§Øª</h2>
                    <div className="space-y-4">
                      {quests.map(quest => {
                        const isCompleted = completedQuests.includes(quest.id);
                        const canClaim = quest.check() && !isCompleted;
                        return (
                          <div 
                            key={quest.id}
                            className={`bg-white rounded-lg p-4 ${isCompleted ? 'opacity-50' : ''}`}
                          >
                            <div className="flex justify-between items-start mb-2">
                              <div>
                                <h3 className="text-xl font-bold">{quest.title}</h3>
                                <p className="text-gray-600">{quest.desc}</p>
                              </div>
                              <div className="text-2xl">
                                {isCompleted ? 'âœ…' : canClaim ? 'ğŸ' : 'â³'}
                              </div>
                            </div>
                            <div className="flex justify-between items-center">
                              <div className="text-lg font-bold text-green-600">
                                Ù…ÙƒØ§ÙØ£Ø©: {quest.reward} ğŸ’°
                              </div>
                              {!isCompleted && (
                                <button
                                  onClick={() => claimQuest(quest)}
                                  disabled={!canClaim}
                                  className="bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-bold"
                                >
                                  {canClaim ? 'Ø§Ø³ØªÙ„Ù… Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©' : 'Ù„Ù… ØªÙƒØªÙ…Ù„'}
                                </button>
                              )}
                              {isCompleted && (
                                <span className="text-gray-500 font-bold">Ù…ÙƒØªÙ…Ù„Ø© âœ…</span>
                              )}
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                )}

                {currentScreen === 'seller' && (
                  <div className="bg-gradient-to-b from-blue-400 to-blue-600 rounded-lg shadow-xl p-8">
                    <h2 className="text-4xl font-bold text-white text-center mb-6">ğŸª Ø¨Ø§Ø¦Ø¹ Ø§Ù„Ø£Ø®Ø´Ø§Ø¨</h2>
                    <div className="bg-white rounded-lg p-8 max-w-md mx-auto">
                      <div className="text-center mb-6">
                        <div className="text-7xl mb-4">ğŸ‘¨â€ğŸ’¼</div>
                        <p className="text-xl text-gray-700 mb-2">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ø´ØªØ±ÙŠ Ø§Ù„Ø£Ø®Ø´Ø§Ø¨ Ù…Ù†Ùƒ</p>
                        <p className="text-3xl font-bold text-green-600 mb-4">
                          ğŸªµ = {islands[currentIsland].woodValue} ğŸ’°
                        </p>
                      </div>
                      
                      <div className="bg-gray-100 rounded-lg p-6 mb-6">
                        <div className="text-center">
                          <div className="text-lg text-gray-600 mb-2">Ø¹Ù†Ø¯Ùƒ Ø­Ø§Ù„ÙŠØ§Ù‹</div>
                          <div className="text-4xl font-bold text-amber-700 mb-2">{wood} ğŸªµ</div>
                          <div className="text-2xl text-green-600 font-bold">
                            = {wood * islands[currentIsland].woodValue} ğŸ’°
                          </div>
                        </div>
                      </div>

                      <button
                        onClick={sellWood}
                        disabled={wood === 0}
                        className="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-4 rounded-lg text-xl"
                      >
                        {wood === 0 ? 'Ù…Ø§ Ø¹Ù†Ø¯Ùƒ Ø£Ø®Ø´Ø§Ø¨!' : `Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ø£Ø®Ø´Ø§Ø¨ ğŸ’°`}
                      </button>
                    </div>
                  </div>
                )}

                {currentScreen === 'shop' && (
                  <div className="bg-gradient-to-b from-purple-400 to-purple-600 rounded-lg shadow-xl p-8">
                    <h2 className="text-4xl font-bold text-white text-center mb-6">ğŸ›’ Ù…ØªØ¬Ø± Ø§Ù„ØªØ±Ù‚ÙŠØ§Øª</h2>
                    
                    <div className="grid md:grid-cols-2 gap-6 mb-6">
                      <div className="bg-white rounded-lg p-6">
                        <div className="text-6xl text-center mb-4">ğŸ’</div>
                        <h3 className="text-2xl font-bold text-center mb-2">ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø´Ù†Ø·Ø©</h3>
                        <div className="text-center text-gray-600 mb-4">
                          <div className="text-lg">Ø§Ù„Ø³Ø¹Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span className="font-bold text-purple-600">{bagCapacity} ğŸªµ</span></div>
                          <div className="text-lg">Ø§Ù„Ø³Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ±Ù‚ÙŠØ©: <span className="font-bold text-green-600">{bagCapacity + 5} ğŸªµ</span></div>
                        </div>
                        <button
                          onClick={upgradeBag}
                          disabled={money < (bagCapacity - 5 + 1) * 50}
                          className="w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg"
                        >
                          {money >= (bagCapacity - 5 + 1) * 50 
                            ? `ØªØ±Ù‚ÙŠØ© (${(bagCapacity - 5 + 1) * 50} ğŸ’°)` 
                            : `ØªØ­ØªØ§Ø¬ ${(bagCapacity - 5 + 1) * 50} ğŸ’°`}
                        </button>
                      </div>

                      <div className="bg-white rounded-lg p-6">
                        <div className="text-6xl text-center mb-4">ğŸª“</div>
                        <h3 className="text-2xl font-bold text-center mb-2">ØªØ±Ù‚ÙŠØ© Ø§Ù„ÙØ£Ø³</h3>
                        <div className="text-center text-gray-600 mb-4">
                          <div className="text-lg">Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span className="font-bold text-purple-600">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {axePower}</span></div>
                          <div className="text-lg">Ø§Ù„Ù‚ÙˆØ© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ±Ù‚ÙŠØ©: <span className="font-bold text-green-600">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {axePower + 1}</span></div>
                        </div>
                        <button
                          onClick={upgradeAxe}
                          disabled={money < axePower * 100}
                          className="w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg"
                        >
                          {money >= axePower * 100 
                            ? `ØªØ±Ù‚ÙŠØ© (${axePower * 100} ğŸ’°)` 
                            : `ØªØ­ØªØ§Ø¬ ${axePower * 100} ğŸ’°`}
                        </button>
                      </div>
                    </div>

                    <button
                      onClick={resetGame}
                      className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg"
                    >
                      ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©
                    </button>
                  </div>
                )}
              </div>
            </div>
          );
        };

        ReactDOM.render(<TreeChopGame />, document.getElementById('root'));
    </script>
</body>
</html>
